# Image pour scripts python millegrilles.transaction
# Note: les fichiers doivent avoir ete copies dans le repertoire courant sous src/

FROM python:3.7

ENV BUILD_FOLDER=/opt/millegrilles/build \
    BUNDLE_FOLDER=/opt/millegrilles/dist \
    c=/opt/millegrilles/build/src \
    PYTHONPATH=/opt/millegrilles/dist \
    MG_MQ_HOST=mq \
    MG_MONGO_HOST=mongo

COPY scripts/ $BUILD_FOLDER/scripts
COPY src/ $SRC_FOLDER/

RUN $BUILD_FOLDER/scripts/setup.sh

WORKDIR /opt/millegrilles/dist
ENTRYPOINT ["python3"]
CMD ["demarrer.py"]

